---
layout: post
title: "Ubuntu 下通过校园网认证的办法"
date: 2013-05-26 04:13:00 +0800
comments: true
categories: Ancient Blog
---

_<font color = "gray">这是一篇从旧博客迁移来的文章</font>_

<!-- more -->

### 概述

---

本身有很多种通过认证的办法：

1. 学校有提供 linux 版本的认证程序
2. 有相兼容的认证程序, 像是 _mentohust_, _drcom_ 等等
3. 可以用 _wine_ 运行的认证程序
4. 通过虚拟机

对于第二种办法，因地而异，百度一些认证拨号程序试一试，最常见的就是 _mentohust_ 、_drcom_

估计可以用 _wine_ 运行的认证比较少，毕竟需要底层硬件操作

本次操作的环境是 _ubuntu 13.04_

### 解决办法

---

这里大致的说一下第四种办法：

#### 一、首先安装虚拟机，_virtual box_ 、_vmware_ 或者其他的都可以

#### 二、_virtual box_ 的安装直接在软件中心就有，关于 _vmware_ 安装可能会遇到一些问题：

1. 尽量从官网下载最新版本的 _vmware workstation for linux_ ， 我这里版本是`9.0.2`，非官方的版本可能会出现一个找不到 `kernel-header` 的错误
2. 下载之后的文件是 `bundle` 格式的，将下载好的文件放到 linux 下的分区，桌面即可，将属性里面的可执行选项打钩，或者命令 `sudo chmod +x vmware.bundle` ，然后在终端里直接运行
3. 关于序列号，度娘灰常清楚，不过会出现点输入序列号没有反应的情况，终端下用命令：

```bash
sudo /usr/lib/vmware/bin/vmware-vmx --new-sn JV2ZX-8R10P-MZV89-E98NK-9A8LM
```

这个序列号 `9.0.2` 版本是有效的，无效请百度

#### 三、我这里用 _vmware_ ，新建一个虚拟机，安装一个 xp，这个步骤和 _windows_ 下的使用方法是一样的，百度有很多的介绍

#### 四、在 xp 里安装认证

#### 五、接下来是重点，用双网卡来完成真机的代理：

1. 在 xp 里的网络连接里设置好本地连接，根据不同的校园网环境设置
2. 在 _vmware_ 的虚拟机设置里，添加一个新的网卡硬件，并且选择 `host-only`
3. 回到 xp 的网络连接，出现一个新的本地连接，属性里的 IP 设置为自动获取
4. 在 xp 里下载安装 _ccproxy 2010_ ，直接打开默认设置就 ok
5. 回到真机，现在可以直接通过代理来上网了，代理的 ip 是 本地连接 2 的 ip 地址，_ccproxy_ 如果是默认设置的话端口是 808

#### 六、一些其他问题：

1. 关于是否能在虚拟机内认证后直接在真机上网，这个跟认证方式有关，有说可以通过在真机的连接设置里将克隆 MAC 填写与虚拟机内的连接一致即可，不过在我这里的环境下无效，无论 _vmware_ 连接设置为 `NAT` 还是 `Bridge`。
2. _ubuntu_ 下全局代理的问题，我尝试过 `export http_proxy=http://address:port` 无效，尝试过在 xp 里设置 vpn，从外面连接进去，没有成功，可以连接，不能上网，有时候也会连不上。
3. 如果没有成功的设置好全局代理的话，终端环境下不能连接 internet，其他的未知

---

至此已经可以连接到外网了，但是第四种办法是最无奈的办法，前两种办法能成功最好
